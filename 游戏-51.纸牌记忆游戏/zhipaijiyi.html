<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>çº¸ç‰Œè®°å¿†æ¸¸æˆ</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" href="https://haiyong.site/img/favicon.png" sizes="192x192" />
	<style>
		html {
			box-sizing: border-box;
		}
		
		*,
		*::before,
		*::after {
			box-sizing: inherit;
		}
		
		html,
		body {
			width: 100%;
			height: 100%;
			margin: 0;
			padding: 0;
			font-weight:bolder;
		}
		
		body {
			background: #ffffff;
			font-size: 16px;
		}
		
		.container {
			display: flex;
			justify-content: center;
			align-items: center;
			flex-direction: column;
		}
		
		h1 {
			font-family: 'Gloria Hallelujah', cursive;
		}
		
		/*çº¸ç‰Œçš„æ ·å¼*/
		.deck {
			width: 85%;
			background: #716F71;
			padding: 1rem;
			border-radius: 4px;
			box-shadow: 8px 9px 26px 0 rgba(46, 61, 73, 0.5);
			display: flex;
			flex-wrap: wrap;
			justify-content: space-around;
			align-items: center;
			margin: 0 0 3em;
		}
		
		.deck .card {
			height: 3.7rem;
			width: 3.7rem;
			margin: 0.2rem 0.2rem;
			background: #141214;;
			font-size: 0;
			color: #ffffff;
			border-radius: 5px;
			cursor: pointer;
			display: flex;
			justify-content: center;
			align-items: center;
			box-shadow: 5px 2px 20px 0 rgba(46, 61, 73, 0.5);
		}
		
		.deck .card.open {
			transform: rotateY(0);
			background: #02b3e4;
			cursor: default;
			animation-name: flipInY;
			-webkit-backface-visibility: visible;
			backface-visibility: visible;
			animation-duration: .75s;
		}
		
		.deck .card.show {
			font-size: 33px;
		}
		
		.deck .card.match {
			cursor: default;
			background: #E5F720;
			font-size: 33px;
			animation-name: rubberBand;
			-webkit-backface-visibility: visible;
			backface-visibility: visible;
			animation-duration: .75s;
		}
		
		.deck .card.unmatched {
			animation-name: pulse;
			-webkit-backface-visibility: visible;
			backface-visibility: visible;
			animation-duration: .75s;
			background: #e2043b;
		}
		
		.deck .card.disabled {
			pointer-events: none;
			opacity: 0.9;
		}
		
		/*åˆ†æ•°é¢æ¿çš„æ ·å¼*/
		.score-panel {
			text-align: left;
			margin-bottom: 10px;
		}
		
		.score-panel .stars {
			margin: 0;
			padding: 0;
			display: inline-block;
			margin: 0 5px 0 0;
		}
		
		.score-panel .stars li {
			list-style: none;
			display: inline-block;
		}
		
		.score-panel .restart {
			float: right;
			cursor: pointer;
		}
		
		.fa-star {
			color: #FFD700;
		}
		
		.timer {
			display: inline-block;
			margin: 0 1rem;
		
		}
		
		/*ç¥è´ºé¢æ¿çš„æ ·å¼*/
		.overlay {
			position: fixed;
			top: 0;
			bottom: 0;
			left: 0;
			right: 0;
			background: rgba(0, 0, 0, 0.7);
			transition: opacity 500ms;
			visibility: hidden;
			opacity: 0;
		}
		
		.overlay:target {
			visibility: visible;
			opacity: 1;
		}
		  
		.popup {
			margin: 70px auto;
			padding: 20px;
			background: #ffffff;
			border-radius: 5px;
			width: 85%;
			position: relative;
			transition: all 5s ease-in-out;
		}
		  
		.popup h2 {
			margin-top: 0;
			color: #333;
			font-family: Tahoma, Arial, sans-serif;
		}
		
		.popup .close {
			position: absolute;
			top: 20px;
			right: 30px;
			transition: all 200ms;
			font-size: 30px;
			font-weight: bold;
			text-decoration: none;
			color: #333;
		}
		
		.popup .close:hover {
			color: #E5F720;
		}
		
		.popup .content-1,
		.content-2 {
			max-height: 30%;
			overflow: auto;
			text-align: center;
		}
		
		.show {
			visibility: visible;
			opacity: 100;
		}
		
		#starRating li {
			display: inline-block;
		}
		
		#play-again {
			background-color: #141214;
			padding: 0.7rem 1rem;
			font-size: 1.1rem;
			display: block;
			margin: 0 auto;
			width: 50%;
			font-family: 'Gloria Hallelujah', cursive;
			color: #ffffff;
			border-radius: 5px;
		}
		
		/* å¡ç‰‡æ‰“å¼€æ—¶çš„åŠ¨ç”» */
		
		@keyframes flipInY {
			from {
				transform: perspective(400px) rotate3d(0, 1, 0, 90deg);
				animation-timing-function: ease-in;
				opacity: 0;
			}
		
			40% {
				transform: perspective(400px) rotate3d(0, 1, 0, -20deg);
				animation-timing-function: ease-in;
			}
		
			60% {
				transform: perspective(400px) rotate3d(0, 1, 0, 10deg);
				opacity: 1;
			}
		
			80% {
				transform: perspective(400px) rotate3d(0, 1, 0, -5deg);
			}
		
			to {
				transform: perspective(400px);
			}
		}
		
		/* å¡ç‰‡åŒ¹é…æ—¶çš„åŠ¨ç”» */
		@keyframes rubberBand {
			from {
				transform: scale3d(1, 1, 1);
			}
		
			30% {
				transform: scale3d(1.25, 0.75, 1);
			}
		
			40% {
				transform: scale3d(0.75, 1.25, 1);
			}
		
			50% {
				transform: scale3d(1.15, 0.85, 1);
			}
		
			65% {
				transform: scale3d(.95, 1.05, 1);
			}
		
			75% {
				transform: scale3d(1.05, .95, 1);
			}
		
			to {
				transform: scale3d(1, 1, 1);
			}
		}
		
		/* å¡ç‰‡ä¸åŒ¹é…æ—¶çš„åŠ¨ç”» */
		@keyframes pulse {
			from {
				transform: scale3d(1, 1, 1);
			}
		
			50% {
				transform: scale3d(1.2, 1.2, 1.2);
			}
		
			to {
				transform: scale3d(1, 1, 1);
			}
		}
		
		/******åª’ä½“æŸ¥è¯¢*****/
		/* é€‚ç”¨äº 320px ä»¥ä¸‹çš„æ ·å¼*/
		@media (max-width: 320px) {
			.deck {
			  width: 85%;
			}
		  
			.deck .card {
			  height: 4.7rem;
			  width: 4.7rem;
			}
		  }
		  
		  /* é€‚ç”¨äº 768px ä»¥ä¸Šçš„æ ·å¼*/
		  @media (min-width: 768px) {
			.container {
			  font-size: 22px;
			}
		  
			.deck {
			  width: 660px;
			  height: 680px;
			}
		  
			.deck .card {
			  height: 125px;
			  width: 125px;
			}
		  
			.popup {
			  width: 60%;
			}
		  }
		 .page-footer {
		   position: fixed;
		   right: 0;
		   bottom: 20px;
		   display: flex;
		   align-items: center;
		   padding: 5px;
		   color: black;
		   background: rgba(255, 255, 255, 0.65);
		 }
		 
		 .page-footer a {
		   display: flex;
		   margin-left: 4px;
		 }
		 .touxiang{
		 	width:24px;
		 	height:24px;
		 }
	</style>
	<!-- å¯¼å…¥bootstrapä»¥åŠå­—ä½“å›¾æ ‡ç­‰æ ·å¼ -->
    <link rel="stylesheet prefetch" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
</head>
<body>

    <div class="container">
        <header>
            <h1>çº¸ç‰Œè®°å¿†æ¸¸æˆ</h1>
        </header>
        <section class="score-panel">
        	<ul class="stars">
        		<li><i class="fa fa-star"></i></li>
        		<li><i class="fa fa-star"></i></li>
        		<li><i class="fa fa-star"></i></li>
        	</ul>
        	<span class="moves">0</span>
            <div class="timer"></div>
            <div class="restart" onclick="startGame()">
        		<i class="fa fa-repeat"></i>
        	</div>
        </section>
        <ul class="deck" id="card-deck">
            <li class="card" type="diamond"><i class="fa fa-diamond"></i></li>
            <li class="card" type="plane"><i class="fa fa-paper-plane-o"></i></li>
            <li class="card match" type="anchor"><i class="fa fa-anchor"></i> </li>
            <li class="card" type="bolt" ><i class="fa fa-bolt"></i></li>
            <li class="card" type="cube"><i class="fa fa-cube"></i></li>
            <li class="card match" type="anchor"><i class="fa fa-anchor"></i></li>
            <li class="card" type="leaf"><i class="fa fa-leaf"></i></li>
            <li class="card" type="bicycle"><i class="fa fa-bicycle"></i></li>
            <li class="card" type="diamond"><i class="fa fa-diamond"></i></li>
            <li class="card" type="bomb"><i class="fa fa-bomb"></i></li>
            <li class="card" type="leaf"><i class="fa fa-leaf"></i></li>
            <li class="card" type="bomb"><i class="fa fa-bomb"></i></li>
            <li class="card open show" type="bolt"><i class="fa fa-bolt"></i></li>
            <li class="card" type="bicycle"><i class="fa fa-bicycle"></i></li>
            <li class="card" type="plane"><i class="fa fa-paper-plane-o"></i></li>
            <li class="card" type="cube"><i class="fa fa-cube"></i></li>
        </ul>
        <div id="popup1" class="overlay">
            <div class="popup">
                <h2>æ­å–œ ğŸ‰</h2>
                <a class="close" href="#">Ã—</a>
                <div class="content-1">
				æ­å–œä½ è·å¾—äº†èƒœåˆ© ğŸ‰ğŸ‰
                </div>
                <div class="content-2">
				    <p>ä½ åœ¨<span id="totalTime"> </span>å†… </p>
                    <p>ç§»åŠ¨äº†<span id="finalMove"> </span> æ¬¡ </p>                 
                    <p>æ˜Ÿçº§:  <span id="starRating"></span></p>
                </div>
                <button id="play-again"onclick="playAgain()">
                    å†ç©ä¸€æ¬¡ ğŸ˜„</a>
                </button>
            </div>
        </div>
		<footer class="page-footer">
		  <span>made by </span>
		  <a href="https://haiyong.site/moyu" target="_blank">
		    <img class="touxiang"  src="https://haiyong.site/img/favicon.png" alt="George Martsoukos logo">
		  </a>
		</footer>
    </div>
    <script>
		// å¡ç‰‡æ•°ç»„åŒ…å«æ‰€æœ‰å¡ç‰‡
		let card = document.getElementsByClassName("card");
		let cards = [...card];
		
		// æ¸¸æˆä¸­æ‰€æœ‰å¡ç‰‡
		const deck = document.getElementById("card-deck");
		
		// å£°æ˜ moves å˜é‡
		let moves = 0;
		let counter = document.querySelector(".moves");
		
		// å£°æ˜æ˜Ÿå½¢å›¾æ ‡çš„å˜é‡
		const stars = document.querySelectorAll(".fa-star");
		
		// å£°æ˜ matchedCard çš„å˜é‡
		let matchedCard = document.getElementsByClassName("match");
		
		 // æ˜Ÿçº§åˆ—è¡¨
		 let starsList = document.querySelectorAll(".stars li");
		
		 // æ¨¡æ¿ä¸­çš„å…³é—­å›¾æ ‡
		 let closeicon = document.querySelector(".close");
		
		 // å£°æ˜ modal
		 let modal = document.getElementById("popup1")
		
		 // æ‰“å¼€å¡ç‰‡çš„æ•°ç»„
		var openedCards = [];
		
		
		// æ´—ç‰ŒåŠŸèƒ½
		function shuffle(array) {
		    var currentIndex = array.length, temporaryValue, randomIndex;
		
		    while (currentIndex !== 0) {
		        randomIndex = Math.floor(Math.random() * currentIndex);
		        currentIndex -= 1;
		        temporaryValue = array[currentIndex];
		        array[currentIndex] = array[randomIndex];
		        array[randomIndex] = temporaryValue;
		    }
		
		    return array;
		};
		
		
		// é¡µé¢åˆ·æ–°/åŠ è½½æ—¶æ´—ç‰Œ
		document.body.onload = startGame();
		
		// å¼€å§‹æ–°æ¸¸æˆçš„åŠŸèƒ½
		function startGame(){
		 
		    // æ¸…ç©º openCards æ•°ç»„
		    openedCards = [];
		
		    // æ´—ç‰Œ
		    cards = shuffle(cards);
		    // ä»æ¯å¼ å¡ç‰‡ä¸­åˆ é™¤æ‰€æœ‰ç°æœ‰çš„ç±»
		    for (var i = 0; i < cards.length; i++){
		        deck.innerHTML = "";
		        [].forEach.call(cards, function(item) {
		            deck.appendChild(item);
		        });
		        cards[i].classList.remove("show", "open", "match", "disabled");
		    }
		    // é‡ç½® moves
		    moves = 0;
		    counter.innerHTML = moves;
		    // é‡ç½® rating
		    for (var i= 0; i < stars.length; i++){
		        stars[i].style.color = "#FFD700";
		        stars[i].style.visibility = "visible";
		    }
		    // é‡ç½® timer
		    second = 0;
		    minute = 0; 
		    hour = 0;
		    var timer = document.querySelector(".timer");
		    timer.innerHTML = "0 åˆ† 0 ç§’";
		    clearInterval(interval);
		}
		
		
		// æ˜¾ç¤ºå¡ç‰‡çš„åŠŸèƒ½
		var displayCard = function (){
		    this.classList.toggle("open");
		    this.classList.toggle("show");
		    this.classList.toggle("disabled");
		};
		
		
		// å°†æ‰“å¼€çš„å¡ç‰‡æ·»åŠ åˆ° OpenedCards åˆ—è¡¨å¹¶æ£€æŸ¥å¡ç‰‡æ˜¯å¦åŒ¹é…
		function cardOpen() {
		    openedCards.push(this);
		    var len = openedCards.length;
		    if(len === 2){
		        moveCounter();
		        if(openedCards[0].type === openedCards[1].type){
		            matched();
		        } else {
		            unmatched();
		        }
		    }
		};
		
		
		// å½“å¡ç‰‡åŒ¹é…æ—¶çš„åŠŸèƒ½
		function matched(){
		    openedCards[0].classList.add("match", "disabled");
		    openedCards[1].classList.add("match", "disabled");
		    openedCards[0].classList.remove("show", "open", "no-event");
		    openedCards[1].classList.remove("show", "open", "no-event");
		    openedCards = [];
		}
		
		
		// å½“å¡ç‰‡ä¸åŒ¹é…æ—¶çš„åŠŸèƒ½
		function unmatched(){
		    openedCards[0].classList.add("unmatched");
		    openedCards[1].classList.add("unmatched");
		    disable();
		    setTimeout(function(){
		        openedCards[0].classList.remove("show", "open", "no-event","unmatched");
		        openedCards[1].classList.remove("show", "open", "no-event","unmatched");
		        enable();
		        openedCards = [];
		    },1100);
		}
		
		
		// æš‚æ—¶ç¦ç”¨å¡ç‰‡çš„åŠŸèƒ½
		function disable(){
		    Array.prototype.filter.call(cards, function(card){
		        card.classList.add('disabled');
		    });
		}
		
		
		// å¯ç”¨å¡ç‰‡å¹¶ç¦ç”¨åŒ¹é…çš„å¡ç‰‡çš„åŠŸèƒ½
		function enable(){
		    Array.prototype.filter.call(cards, function(card){
		        card.classList.remove('disabled');
		        for(var i = 0; i < matchedCard.length; i++){
		            matchedCard[i].classList.add("disabled");
		        }
		    });
		}
		
		
		// è®¡ç®—ç©å®¶çš„åŠ¨ä½œçš„åŠŸèƒ½
		function moveCounter(){
		    moves++;
		    counter.innerHTML = moves;
		    // ç¬¬ä¸€æ¬¡ç‚¹å‡»æ—¶å¯åŠ¨è®¡æ—¶å™¨
		    if(moves == 1){
		        second = 0;
		        minute = 0; 
		        hour = 0;
		        startTimer();
		    }
		    // æ ¹æ®ç§»åŠ¨æ¬¡æ•°è®¾ç½®æ˜Ÿçº§
		    if (moves > 8 && moves < 12){
		        for( i= 0; i < 3; i++){
		            if(i > 1){
		                stars[i].style.visibility = "collapse";
		            }
		        }
		    }
		    else if (moves > 13){
		        for( i= 0; i < 3; i++){
		            if(i > 0){
		                stars[i].style.visibility = "collapse";
		            }
		        }
		    }
		}
		
		
		// æ˜¾ç¤ºæ¸¸æˆçš„æ—¶é—´
		var second = 0, minute = 0; hour = 0;
		var timer = document.querySelector(".timer");
		var interval;
		function startTimer(){
		    interval = setInterval(function(){
		        timer.innerHTML = minute+" åˆ†"+second+" ç§’";
		        second++;
		        if(second == 60){
		            minute++;
		            second=0;
		        }
		        if(minute == 60){
		            hour++;
		            minute = 0;
		        }
		    },1000);
		}
		
		
		// æ‰€æœ‰å¡ç‰‡åŒ¹é…åŒ¹é…æ—¶å±•ç¤ºæ­å–œç•Œé¢ï¼Œæ˜¾ç¤ºç§»åŠ¨æ¬¡æ•°æ—¶é—´å’Œç­‰çº§
		function congratulations(){
		    if (matchedCard.length == 16){
		        clearInterval(interval);
		        finalTime = timer.innerHTML;
		
		        // æ˜¾ç¤ºç¥è´ºæ¨¡æ¿
		        modal.classList.add("show");
		
		        // å£°æ˜æ˜Ÿçº§å˜é‡
		        var starRating = document.querySelector(".stars").innerHTML;
		
		        // æ˜¾ç¤ºç§»åŠ¨ã€è¯„çº§ã€æ—¶é—´
		        document.getElementById("finalMove").innerHTML = moves;
		        document.getElementById("starRating").innerHTML = starRating;
		        document.getElementById("totalTime").innerHTML = finalTime;
		
		        //æ¨¡æ¿ä¸Šçš„å…³é—­å›¾æ ‡
		        closeModal();
		    };
		}
		
		
		// ç•Œé¢ä¸Šçš„å…³é—­å›¾æ ‡
		function closeModal(){
		    closeicon.addEventListener("click", function(e){
		        modal.classList.remove("show");
		        startGame();
		    });
		}
		
		
		// å†æ¬¡æ¸¸æˆåŠŸèƒ½
		function playAgain(){
		    modal.classList.remove("show");
		    startGame();
		}
		
		
		// å¾ªç¯ä»¥å°†äº‹ä»¶ä¾¦å¬å™¨æ·»åŠ åˆ°æ¯å¼ å¡ç‰‡
		for (var i = 0; i < cards.length; i++){
		    card = cards[i];
		    card.addEventListener("click", displayCard);
		    card.addEventListener("click", cardOpen);
		    card.addEventListener("click",congratulations);
		};
		
	</script>
</body>
</html>
